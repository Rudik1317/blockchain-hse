![[blockchain-hse/week-3/slides.pdf#page=3]]

CFT более простой способ.
BFT есть еще специальные ноды которые пытаются corrupt network.
Основная задача CFT репликация БД. Что бы состояние нод для пользователей было одинаково.
### Paxos
![[blockchain-hse/week-3/slides.pdf#page=8]]
Proposer принимает запросы жителей и отдает в парламент
Acceptor голосуют за законы
Learner человек который узнает о законах и передает их жителям
Quorum большинство acceptorов которые приняли определенно ерешение(за/против)

Вместо обычного времени для синхронизации и сортировки действий используются числа Лампорта
![[blockchain-hse/week-3/slides.pdf#page=12]]
Локально на каждой ноде ведем счетчик и увеличиваем его при каждом принятии, отправки сообщения по сети.
Получается логическое время.
![[blockchain-hse/week-3/slides.pdf#page=13]]
Но что бы сделать глобальное время мы еще приписываем идентификатор ноды

### Byzantine 
![[blockchain-hse/week-3/slides.pdf#page=16]]
Правила:
* Ни какие два лояльных генерала не должны делать разные вещи
* Если Генерал лояльный, то все остальные лояльные генералы должны поддержать действие командующего
* Процесс должен быть заканчивающим. Т.е все лояльные генералы должны принять какое либо действие
Что бы все работало и мы не ловили обман, то участников должно быть 3f+1 , where f is # of trators 

Нам нужно обеспечить что бы все реквесты выполнялись в одном и том же порядке (это и есть pBFT)
![[blockchain-hse/week-3/slides.pdf#page=21]]

Primary node устанавливает номер рекветсу в своем вью
![[blockchain-hse/week-3/slides.pdf#page=23]]

Bakcup проверяют:
* Проверяют Primary. Что именно это нода отправила
* Что именно этот праймари является праймари в этом вью
* Что они не принимали никакой другой номер для этого месседжа
* Проверяют корректный хеш для сообщения
И потом отправляют подтверждение другим нодам (препаре сообщения)

Когда ноды собрали сертификат. Они ссобирают комиты и финализируют результат.

